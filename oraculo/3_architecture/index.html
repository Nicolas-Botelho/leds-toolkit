<!DOCTYPE html><meta charset="utf-8"><h1 id="architecture-and-modularization">Architecture and Modularization</h1><p>The Or√°culo project is organized into well-defined modules with specific responsibilities, forming a decoupled and scalable architecture. Below is a clear explanation of each component‚Äôs role:</p><h2 id="main-components">Main Components</h2><ul><li><p>üîÅ <strong>Airbyte (ETL)</strong><br>Responsible for extracting data from GitHub (issues, pull requests, etc.), transforming and loading it into the PostgreSQL database.<br>The current approach captures data from Airbyte‚Äôs temporary cache, transforms it, and inserts it into a <strong>custom relational schema</strong> with normalized tables. This improves compatibility with Vanna and enables more accurate SQL generation.</p></li><li><p>‚öôÔ∏è <strong>Backend (FastAPI)</strong><br>API developed with FastAPI. It acts as a bridge between the user and the database: receives questions, uses the AI to generate SQL queries, executes them, and formats the responses.<br>Pattern used: MVC (Model, View, Controller)</p></li><li><p>üß† <strong>MyVanna (LLM/AI)</strong><br>AI component that uses Google‚Äôs Gemini model and ChromaDB. It interprets user questions, generates SQL, runs queries, and translates responses into natural language.<br>Responsibilities:</p><ul><li>Understands the database schema</li><li>Generates and runs SQL queries</li><li>Learns from custom examples</li></ul><p>Additionally, to validate AI responses, the system now includes <strong>semantic similarity tests</strong> using Google BERT. These tests compare the generated SQL with expected queries using cosine similarity. If similarity is below 60%, the response is flagged as poor quality.</p></li><li><p>üåê <strong>OpenWebUI (Graphical Interface)</strong><br>The visual interface where the user interacts with the system, submits questions, and receives responses.</p></li></ul><h2 id="overview-of-the-data-flow">Overview of the Data Flow</h2><p>User (OpenWebUI interface)<br>‚Üì<br><code>pipeline_api.py</code><br>‚Üì<br>FastAPI (backend/API)<br>‚Üì<br>Vanna.AI (LLM)<br>‚Üì<br>SQL ‚Üí PostgreSQL Database<br>‚Üì<br>‚Ü™ Response shown to the user</p><h2 id="architecture-summary-by-role">Architecture Summary by Role</h2><div style="overflow:auto"><table><thead><tr><th>Component</th><th>Role</th><th>Description</th></tr></thead><tbody><tr><td>OpenWebUI</td><td>Interface</td><td>Frontend for user interaction</td></tr><tr><td>FastAPI (API)</td><td>Backend/API</td><td>Receives questions, uses AI, queries database</td></tr><tr><td>Airbyte</td><td>ETL</td><td>Extracts GitHub data and loads it into PostgreSQL</td></tr><tr><td>MyVanna</td><td>LLM / AI</td><td>Generates SQL and natural language responses using Gemini + Chroma</td></tr><tr><td>PostgreSQL</td><td>Database</td><td>Stores GitHub data queried by the system</td></tr></tbody></table></div><h2 id="design-patterns-used">Design Patterns Used</h2><ul><li><p><strong>Singleton</strong><br>Ensures only one instance of key components like:</p><ul><li><code>AskController</code> (question logic)</li><li><code>MyVanna</code> (AI client)</li><li><code>airbyte</code> (ETL process)</li></ul></li><li><p><strong>MVC (Model-View-Controller)</strong><br>Applied in the API:</p><ul><li><strong>Models</strong>: Define the structure of questions/responses</li><li><strong>Controllers</strong>: Process the logic (e.g. <code>AskController.py</code>)</li><li><strong>Views/Routes</strong>: Handle API endpoints (e.g. <code>routes.py</code>)</li></ul></li></ul><h2 id="deployment">Deployment</h2><p>The entire system is containerized using Docker. Components defined in <code>docker-compose.yml</code> include:</p><ul><li><code>db</code>: PostgreSQL database</li><li><code>back-end</code>: Python-based API and ETL</li><li><code>front-end</code>: OpenWebUI interface</li></ul><p>Configuration files include <code>Dockerfile.dev</code>, <code>Dockerfile.pub</code>, and <code>Dockerfile</code>.</p><h2 id="security-and-configuration">Security and Configuration</h2><p>Sensitive data is stored in <code>.env</code> files. This includes:</p><ul><li>GitHub token</li><li>Database password</li><li>Gemini API key</li></ul><h2 id="testing">Testing</h2><p>Tests are implemented using <code>pytest</code>, including:</p><ul><li>MyVanna tests (SQL generation and DB connection)</li><li>Pipeline tests (question handling)</li><li>API tests (<code>/ask</code> endpoint)</li><li>AI Response Quality Tests: Implemented with BERT to evaluate the semantic similarity between expected and generated SQL queries. Tests fail if similarity drops below 60%.</li></ul><hr><p>The Or√°culo system demonstrates how AI and GitHub integration can simplify development tracking through natural language. Its architecture is modular, follows good design principles, and is production-ready with testing, containerization, and secure configuration.</p>